(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4281],{93058:function(e,t,n){"use strict";n.d(t,{O:function(){return i}});class o{constructor(e){this.kintoUrl="https://engen.kinto.xyz",this.appAddress=e,this.iframeId="kinto-sdk-iframe",this.modalId="kinto-sdk-modal"}async connect(){let e=document.getElementById(this.iframeId),t=document.getElementById(this.modalId);if(!e||!t){(e=document.createElement("iframe")).id="kinto-sdk-iframe",e.src=`${this.kintoUrl}/connect?appDomain=${encodeURIComponent(window.location.origin)}&appAddress=${this.appAddress}`,e.allow="publickey-credentials-get *",e.style.width="100%",e.style.height="100%",e.style.border="none",(t=document.createElement("div")).id="kinto-sdk-modal",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.display="none",t.style.justifyContent="center",t.style.alignItems="center";let n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.backgroundColor="white",n.style.borderRadius="8px",n.style.overflow="hidden",n.appendChild(e),t.appendChild(n),document.body.appendChild(t)}return new Promise((e,n)=>{let o=i=>{i.origin===this.kintoUrl&&("KINTO_ACCOUNT_INFO"===i.data.type?(window.removeEventListener("message",o),e(i.data.accountInfo),t.style.display="none"):"KINTO_CONNECTION_ERROR"===i.data.type&&(window.removeEventListener("message",o),t.style.display="none",n(Error(i.data.error))))};window.addEventListener("message",o)})}async sendTransaction(e){if(0===e.length)return;let t=document.getElementById(this.iframeId),n=document.getElementById(this.modalId);if(t&&n)return n.style.display="flex",t?.contentWindow?.postMessage({type:"KINTO_SEND_TX",txs:e},this.kintoUrl),new Promise((e,t)=>{let o=i=>{i.origin===this.kintoUrl&&("KINTO_TX_SUCCESS"===i.data.type?(window.removeEventListener("message",o),e(i.data.hash),n.style.display="none"):"KINTO_TX_ERROR"===i.data.type&&(window.removeEventListener("message",o),t(Error(i.data.error)),n.style.display="none"))};window.addEventListener("message",o)})}async createNewWallet(){return new Promise((e,t)=>{let n=window.screen.width/2-200,o=window.screen.height/2-350;if(!window.open(`${this.kintoUrl}/onboarding?appDomain=${encodeURIComponent(window.location.origin)}`,"Kinto Onboarding",`width=400,height=700,left=${n},top=${o}`)){t(Error("Failed to open popup. Please allow popups for this site."));return}e()})}}let i=e=>new o(e)},63399:function(e,t,n){Promise.resolve().then(n.bind(n,99160))},99160:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n(57437),i=n(24033),r=n(93058);function s(){let e="0x9A33eF90660321a8aeAfDca271d594d5b052E2DE";if(!e)throw Error("NEXT_PUBLIC_KINTO_APP_ADDRESS is not defined");let t=(0,r.O)(e),n=(0,i.useRouter)(),s=async()=>{console.log("Button clicked");try{await t.createNewWallet();let e=await t.connect();console.log("Connected account info:",e);let o=encodeURIComponent(JSON.stringify(e.walletAddress)),i="/wallet?accountInfo=".concat(o);console.log("Redirecting to:",i),n.push(i)}catch(e){console.error("Failed to connect:",e)}};return(0,o.jsx)("div",{className:"min-h-screen flex flex-col",children:(0,o.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:(0,o.jsx)("div",{className:"max-w-md mx-auto",children:(0,o.jsx)("button",{className:"bg-blue-500 text-white font-bold py-2 px-4 rounded hover:bg-blue-700",onClick:s,children:"Sign in using Kinto Wallet"})})})})}},30622:function(e,t,n){"use strict";var o=n(2265),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,l=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,n){var o,r={},d=null,c=null;for(o in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,o)&&!a.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===r[o]&&(r[o]=t[o]);return{$$typeof:i,type:e,key:d,ref:c,props:r,_owner:l.current}}t.Fragment=r,t.jsx=d,t.jsxs=d},57437:function(e,t,n){"use strict";e.exports=n(30622)},24033:function(e,t,n){e.exports=n(15313)}},function(e){e.O(0,[2971,8822,1744],function(){return e(e.s=63399)}),_N_E=e.O()}]);