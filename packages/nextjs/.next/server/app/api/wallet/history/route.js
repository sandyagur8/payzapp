"use strict";(()=>{var e={};e.id=6805,e.ids=[6805],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},68945:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>l,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var a={};t.r(a),t.d(a,{GET:()=>c});var s=t(95419),o=t(69108),i=t(99678),n=t(78070),u=t(2499);async function c(e){try{let{searchParams:r}=new URL(e.url),t=function(e){if("string"!=typeof e||""===e.trim())throw Error("Invalid address: must be a non-empty string");return e.trim()}(r.get("walletAddress")),{data:a,error:s}=await u.O.from("transactions").select("id, created_at, amount, to").eq("from",t).order("created_at",{ascending:!1});if(s)throw Error(`Error fetching sent transactions: ${s.message}`);let{data:o,error:i}=await u.O.from("transactions").select("id, created_at, amount, from").eq("to",t).order("created_at",{ascending:!1});if(i)throw Error(`Error fetching received transactions: ${i.message}`);let c=[...a?.map(e=>({id:e.id,type:"sent",to:e.to,amount:Number(e.amount),created_at:e.created_at}))??[],...o?.map(e=>({id:e.id,type:"received",from:e.from,amount:Number(e.amount),created_at:e.created_at}))??[]];return c.sort((e,r)=>new Date(r.created_at).getTime()-new Date(e.created_at).getTime()),n.Z.json(c)}catch(e){if(console.error("Error in transaction history API:",e),e instanceof Error&&e.message.startsWith("Invalid address"))return n.Z.json({message:e.message},{status:400});return n.Z.json({message:"Internal server error"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/wallet/history/route",pathname:"/api/wallet/history",filename:"route",bundlePath:"app/api/wallet/history/route"},resolvedPagePath:"/home/sandyagur/Desktop/payzapp/packages/nextjs/app/api/wallet/history/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:l,headerHooks:h,staticGenerationBailout:f}=d,g="/api/wallet/history/route";function x(){return(0,i.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:m})}},2499:(e,r,t)=>{t.d(r,{O:()=>a});let a=(0,t(37861).eI)("https://vfxfcdlgnqcoeaohyqlv.supabase.co/","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZmeGZjZGxnbnFjb2Vhb2h5cWx2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjQ2OTYwOTMsImV4cCI6MjA0MDI3MjA5M30.YPSDzisgs9O7xlas2Oer_T_fzcVzDCbEjj1virVPqMI")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206,7861],()=>t(68945));module.exports=a})();