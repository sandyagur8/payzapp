"use strict";(()=>{var e={};e.id=9800,e.ids=[9800],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},41808:e=>{e.exports=require("net")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},24404:e=>{e.exports=require("tls")},57310:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},93654:(e,s,r)=>{r.r(s),r.d(s,{headerHooks:()=>m,originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>h});var t={};r.r(t),r.d(t,{GET:()=>c});var i=r(95419),a=r(69108),o=r(99678),u=r(78070),n=r(2499);async function c(e){try{let s=new URL(e.url),r=s.searchParams.get("otp"),t=s.searchParams.get("number"),i=s.searchParams.get("method");if(console.log({phoneNumber:t}),console.log({phoneNumber:t}),!r)return u.Z.json({success:!1,message:"Invalid OTP"},{status:400});if(!i||"1"!==i&&"2"!==i)return u.Z.json({success:!1,message:"Invalid method"},{status:400});if("1"===i){let{error:e}=await n.O.from("verification").insert({otp:r,isVerified:!1,PhoneNumber:t});if(e)throw e;return u.Z.json({success:!0,message:"OTP updated successfully"})}{let{data:e,error:s}=await n.O.from("verification").select("isVerified").eq("otp",r).single();if(s)throw s;if(!e)return u.Z.json({success:!1,message:"OTP not found"},{status:404});return u.Z.json({success:!0,message:"OTP status fetched successfully",isVerified:e.isVerified})}}catch(e){return console.log(e),u.Z.json({success:!1,message:"failed"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/user/verify/route",pathname:"/api/user/verify",filename:"route",bundlePath:"app/api/user/verify/route"},resolvedPagePath:"/home/sandyagur/Desktop/payzapp/packages/nextjs/app/api/user/verify/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:f,headerHooks:m,staticGenerationBailout:h}=p,g="/api/user/verify/route";function x(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:d})}},2499:(e,s,r)=>{r.d(s,{O:()=>t});let t=(0,r(37861).eI)("https://vfxfcdlgnqcoeaohyqlv.supabase.co/","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZmeGZjZGxnbnFjb2Vhb2h5cWx2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjQ2OTYwOTMsImV4cCI6MjA0MDI3MjA5M30.YPSDzisgs9O7xlas2Oer_T_fzcVzDCbEjj1virVPqMI")}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[1638,6206,7861],()=>r(93654));module.exports=t})();